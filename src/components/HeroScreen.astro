---
import ImageComp from "./ImageComp.astro";
import { PHONE_NUMBER } from "../data/consts";

interface ctaProp {
  url: string;
  text: string;
  variant?: "primary" | "secondary";
}

interface Props {
  data: {
    image: {
      src: string;
      alt: string;
    };
    videoSrc?: string;
    videoSrcVertical?: string;
    uppertitle?: string;
    title: string;
    subTitle?: string;
    cta?: ctaProp[];
  };
}

const { data } = Astro.props;
---

<section
  class="hero-section relative overflow-hidden flex justify-center items-center lg:items-center text-white min-h-screen md:min-h-[95vh] lg:min-h-[90vh] xl:min-h-[85vh] 2xl:min-h-[80vh]"
  aria-label="Hero section"
>
  <!-- Background overlay for better text readability -->
  <div
    class="absolute inset-0 bg-linear-to-b from-black/70 to-black/50 z-0 backdrop-blur-xs"
    aria-hidden="true"
  >
  </div>

  <!-- Background Image -->
  <ImageComp
    src={data.image.src}
    alt={data.image.alt}
    class="absolute inset-0 h-full w-full object-cover object-center brightness-90 animate-slow-zoom -z-20"
    loading="eager"
    quality={100}
  />
  { data.videoSrc && (
      <video
      autoplay
      muted
      loop
      playsinline
      class="absolute inset-0 w-full h-full object-cover -z-10 hidden md:block"
      >
        <source
          src={data.videoSrc}
          type="video/mp4"
        />
      </video>
    )
  }
  { data.videoSrcVertical && (
      <video
      autoplay
      muted
      loop
      playsinline
      class="absolute inset-0 w-full h-full object-cover -z-10 block md:hidden"
      >
        <source
          src={data.videoSrcVertical}
          type="video/mp4"
        />
      </video>
    )
  }

  <!-- Content Container -->
  <div class="max-w-7xl w-full px-5 md:px-8 lg:px-12 mx-auto z-10">
    <div
      class="flex flex-col justify-center items-center lg:items-start max-w-4xl"
    >
      <!-- Main Content -->
      <div
        class="flex flex-col items-center lg:items-start gap-y-6 text-center lg:text-left"
      >
        <h1
          class="font-title flex flex-col text-muted-50 text-4xl/tight sm:text-5xl/tight md:text-6xl/tight lg:text-7xl/16 font-bold drop-shadow-2xl"
        >
          {
            data.uppertitle && (
              <span class="text-lg/7 mb-3 sm:text-xl/8 md:text-xl/6 font-light text-muted-50 max-w-2xl">
                {data.uppertitle}
              </span>
              <br />
            )
          }
          {data.title}
          {
            data.subTitle && (
              <p
                class="text-lg/7 mt-4 sm:text-xl/8 md:text-xl/6 font-light text-muted-50 max-w-2xl"
                set:html={data.subTitle}
              />
            )
          }
        </h1>
      </div>

      <!-- Call to Action Buttons -->
      {
        data.cta && data.cta.length > 0 && (
          <div class="mt-10 flex flex-col gap-4 items-center sm:flex-row lg:items-start w-full sm:w-auto">
            {data.cta.map((item, index) => (
              <a
                href={item.url}
                class={`${index === 0 ? "btn-primary" : "btn-transparent"}`}
                aria-label={item.text}
              >
                {item.text}
              </a>
            ))}
          </div>
        )
      }
    </div>
  </div>
</section>
